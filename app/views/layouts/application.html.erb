<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.12/css/jquery.dataTables.min.css" />
    <script src="//cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js"></script>
  </head>

  <body>
    <div class="d-flex" id="wrapper">
      <div class="border-right" id="sidebar-wrapper" style="background-color: <%= current_user.enterprise.primary_color %>">
        <div class="sidebar-heading text-center">
          <%= image_tag(current_user.enterprise.logo, height: 70) if current_user.enterprise.logo.attached? %>
        </div>
        <div class="list-group list-group-flush" style="color: <%= current_user.enterprise.secondary_color %>">
          <%= link_to dashboard_index_path, class: 'list-group-item list-group-item-action',
                                            style: "color: #{current_user.enterprise.secondary_color};
                                                    background-color: #{current_user.enterprise.primary_color} !important" do %>
            <i class="fas fa-tachometer-alt"></i>
            <span><%= t('.dashboard') %></span>
          <% end %>
          <% if current_user.is_super_admin %>
            <div class="text-center">
              <%= t('.super_admins') %>
            </div>
            <%= link_to super_admins_enterprises_index_path, class: 'list-group-item list-group-item-action',
                                                             style: "color: #{current_user.enterprise.secondary_color};
                                                                     background-color: #{current_user.enterprise.primary_color} !important" do %>
              <i class="fas fa-building"></i>
              <span><%= t('.company') %></span>
            <% end %>
          <% end %>
        </div>
      </div>
      <div id="page-content-wrapper">
        <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
          <button class="btn rounded-circle border-0"
                  style="background-color: <%= current_user.enterprise.primary_color %>;
                         color: <%= current_user.enterprise.secondary_color %>"
                  id="menu-toggle">
            <i class="fas fa-bars"></i>
          </button>
          <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="fas fa-user"></i>
                <%= current_user.email %>
              </a>
              <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                <%= link_to destroy_user_session_path, method: :delete, class: 'dropdown-item' do %>
                  <i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>
                  <%= t('.exit') %>
                <% end %>
              </div>
            </li>
          </ul>
        </nav>
        <div class="container-fluid">
          <%= yield %>
        </div>
      </div>
    </div>
    <script>
      $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });
    </script>
  </body>
</html>
